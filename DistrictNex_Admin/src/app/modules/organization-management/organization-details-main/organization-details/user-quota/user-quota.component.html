<div class="flex flex-col">
    <div class="grid grid-cols-1 w-full pb-4" *ngIf="numberSuperAdmins > 0">
        <smartr-card class="flex items-center col-span-1 p-6">
            <div class="flex items-center justify-center w-14 h-14 rounded text-gray-600"
                [ngClass]="checkUsersInvalid()?'bg-red-200':'bg-gray-200'">
                <mat-icon class="text-current" [svgIcon]="'mat_outline:shield'"></mat-icon>
            </div>
            <div class="flex-auto ml-4 leading-none">
                <div class="text-sm font-medium text-secondary">Super Admins</div>
                <div class="mt-2 font-medium text-xl">
                    {{numberSuperAdmins}} {{numberSuperAdmins |
                    i18nPlural: {
                    '=0' : 'Super Admins',
                    '=1' : 'Super Admin',
                    'other': 'Super Admins'
                    } }}</div>
            </div>
        </smartr-card>
    </div>
    <div class="grid grid-cols-1 sm:grid-cols-3 gap-4 w-full">
        <smartr-card class="flex items-center col-span-1 p-6">
            <div class="flex items-center justify-center w-14 h-14 rounded text-gray-600"
                [ngClass]="checkUsersInvalid()?'bg-red-200':'bg-gray-200'">
                <mat-icon class="text-current" [svgIcon]="'heroicons_outline:user-group'"></mat-icon>
            </div>
            <div class="flex-auto ml-4 leading-none">
                <div class="text-sm font-medium text-secondary">Organization Users</div>
                <div class="mt-2 font-medium text-xl">
                    {{currentNumberUsers}}/{{oOrganization.MAX_NUMBER_OF_USERS}}
                    {{oOrganization.MAX_NUMBER_OF_USERS |
                    i18nPlural: {
                    '=0' : 'Users',
                    '=1' : 'User',
                    'other': 'Users'
                    } }}</div>
                <mat-progress-bar class="mt-3 rounded-full" [color]="checkUsersInvalid()?'warn':'primary'"
                    [mode]="'determinate'" [value]="currentNumberUsers/oOrganization.MAX_NUMBER_OF_USERS*100">
                </mat-progress-bar>
            </div>
        </smartr-card>
        <smartr-card class="flex items-center col-span-1 p-6">
            <div class="flex items-center justify-center w-14 h-14 rounded text-gray-600"
                [ngClass]="checkAdminsInvalid()?'bg-red-200':'bg-gray-200'">
                <mat-icon class="text-current" [svgIcon]="'mat_outline:admin_panel_settings'"></mat-icon>
            </div>
            <div class="flex-auto ml-4 leading-none">
                <div class="text-sm font-medium text-secondary">Organization Admins</div>
                <div class="mt-2 font-medium text-xl">
                    {{currentNumberAdmins}}/{{oOrganization.MAX_NUMBER_OF_ADMINS}}
                    {{oOrganization.MAX_NUMBER_OF_ADMINS |
                    i18nPlural: {
                    '=0' : 'Admins',
                    '=1' : 'Admin',
                    'other': 'Admins'
                    } }}</div>
                <mat-progress-bar class="mt-3 rounded-full" [color]="checkAdminsInvalid()?'warn':'primary'"
                    [mode]="'determinate'" [value]="currentNumberAdmins/oOrganization.MAX_NUMBER_OF_ADMINS*100">
                </mat-progress-bar>
            </div>
        </smartr-card>
        <smartr-card class="flex items-center col-span-1 p-6">
            <div class="flex items-center justify-center w-14 h-14 rounded text-gray-600"
                [ngClass]="checkTotalInvalid()?'bg-red-200':'bg-gray-200'">
                <mat-icon class="text-current" [svgIcon]="'heroicons_outline:library'"></mat-icon>
            </div>
            <div class="flex-auto ml-4 leading-none">
                <div class="text-sm font-medium text-secondary">Total Users</div>
                <div class="mt-2 font-medium text-xl">{{currentTotalUsers}}/{{totalAllowedUsers}} Total Users</div>
                <mat-progress-bar class="mt-3 rounded-full" [color]="checkTotalInvalid()?'warn':'primary'"
                    [mode]="'determinate'" [value]="currentTotalUsers/totalAllowedUsers*100">
                </mat-progress-bar>
            </div>
        </smartr-card>
    </div>

    <smartr-card class="flex flex-col w-full mt-4 p-8">
        <form #organizationQuotaForm="ngForm">

            <mat-form-field class="w-full mt-2" [floatLabel]="'always'">
                <mat-label>Max Number of Organization Admins</mat-label>
                <mat-icon class="icon-size-5" [svgIcon]="'mat_solid:admin_panel_settings'" matPrefix></mat-icon>
                <input [(ngModel)]="oOrganization.MAX_NUMBER_OF_ADMINS" matInput type="number" min="0" numbersOnly
                    placeholder="Max Number of Organization Admins" name="maxAdmins" required>
                <mat-error>** Invalid Max Number of Organization Admins</mat-error>
            </mat-form-field>

            <mat-form-field class="w-full mt-2" [floatLabel]="'always'">
                <mat-label>Max Number of Organization Users</mat-label>
                <mat-icon class="icon-size-5" [svgIcon]="'heroicons_solid:user-group'" matPrefix></mat-icon>
                <input [(ngModel)]="oOrganization.MAX_NUMBER_OF_USERS" matInput type="number" min="0" numbersOnly
                    placeholder="Max Number of Organization Users" name="maxUsers" required>
                <mat-error>** Invalid Max Number of Organization Users</mat-error>
            </mat-form-field>
        </form>


        <!-- Divider -->
        <div class="mt-4 mb-6 border-t"></div>

        <!-- Actions -->
        <div class="flex items-center justify-end -mb-2">
            <button mat-stroked-button type="button" (click)="resetOrganizationQuota(organizationQuotaForm)"
                [disabled]="isLoading || organizationQuotaForm.pristine">Reset
            </button>

            <button class="ml-4 w-40" mat-flat-button type="button"
                (click)="editOrganizationQuota(organizationQuotaForm)" [disabled]="organizationQuotaForm.invalid || isLoading || organizationQuotaForm.pristine ||
                        checkUsersInvalid() || checkAdminsInvalid() || checkTotalInvalid()">
                <span *ngIf="!isLoading">Save Changes</span>
                <mat-progress-spinner *ngIf="isLoading" [diameter]="24" [mode]="'indeterminate'">
                </mat-progress-spinner>
            </button>
        </div>
    </smartr-card>
</div>