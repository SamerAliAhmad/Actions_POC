<div class="absolute inset-0 flex flex-col min-w-0 overflow-hidden">
    <mat-drawer-container class="flex-auto h-full bg-card dark:bg-transparent" (backdropClick)="onBackdropClicked()">
        <mat-drawer class="w-full sm:w-100 dark:bg-gray-900" [mode]="drawerMode" [opened]="false" [position]="'end'"
            [disableClose]="true" #matDrawer>
            <file-manager-details [currentReport]="chosen_Report" (closeDrawerClickEventEmitter)="closeDrawer()">
            </file-manager-details>
        </mat-drawer>
        <mat-drawer-content class="flex flex-col bg-gray-100 dark:bg-transparent">
            <div class="flex flex-col flex-auto overflow-hidden">
                <div class="flex flex-row flex-wrap items-center p-6 md:px-8 border-b bg-card dark:bg-transparent">
                    <div class="flex items-center justify-center w-12 h-12">
                        <mat-icon *ngIf="!isInWizard" svgIcon="heroicons_outline:document-text"
                            class="icon-size-6 mr-2"></mat-icon>
                        <button *ngIf="isInWizard" (click)="isInWizard=false" class="mr-2" mat-icon-button>
                            <mat-icon svgIcon="heroicons_outline:arrow-left" class="icon-size-6"></mat-icon>
                        </button>
                    </div>
                    <a [bdcWalkTriggerFor]="reportPopup1" class="text-3xl font-extrabold tracking-tight leading-none"
                        [ngClass]="isInWizard?'hover:text-primary cursor-pointer':''" (click)="isInWizard=false">
                        Reports</a>
                    <div *ngIf="isInWizard" class="text-3xl font-extrabold tracking-tight leading-none">&nbsp;/
                        Custom Report</div>
                </div>
                <div class="flex flex-col flex-auto p-6 md:p-8"
                    [ngClass]="isInWizard?'overflow-y-hidden':'overflow-y-auto'" cdkScrollable>
                    <report-wizard *ngIf="isInWizard"
                        class="flex flex-col flex-auto overflow-y-auto overflow-x-hidden p-1"></report-wizard>
                    <ng-container *ngIf="!isInWizard">
                        <div class="flex flex-col">
                            <div class="font-medium">Dimensions</div>
                            <div class="flex flex-wrap -m-2 mt-2">
                                <ng-container *ngFor="let dimension of dimension_List;">
                                    <div [bdcWalkTriggerFor]="reportPopup3"
                                        class="relative w-40 h-40 m-2 p-4 shadow rounded-2xl bg-card mobile-tile"
                                        [ngClass]="{'chosen-dimension': (chosen_Dimension && dimension.DIMENSION_ID === chosen_Dimension.DIMENSION_ID)}">
                                        <a class="z-10 absolute inset-0 flex flex-col p-4 cursor-pointer"
                                            (click)="Choose_Dimension(dimension)">
                                            <div class="aspect-w-9 aspect-h-6">
                                                <div class="flex items-center justify-center">
                                                    <mat-icon class="icon-size-14"
                                                        [ngClass]="{'text-primaryColor': (chosen_Dimension && dimension.DIMENSION_ID === chosen_Dimension.DIMENSION_ID),
                                                                        'text-hint': !(chosen_Dimension && dimension.DIMENSION_ID === chosen_Dimension.DIMENSION_ID) }"
                                                        [svgIcon]="dimension.DIMENSION_ICON"></mat-icon>
                                                </div>
                                            </div>
                                            <div
                                                class="flex flex-col flex-auto justify-center text-center text-sm font-medium">
                                                <div class="truncate" [matTooltip]="dimension.NAME">
                                                    {{dimension.NAME}}
                                                </div>
                                                <ng-container *ngIf="dimension.List_Report">
                                                    <div class="text-secondary truncate">
                                                        {{dimension.List_Report.length}} Documents</div>
                                                </ng-container>
                                            </div>
                                        </a>
                                    </div>
                                </ng-container>
                                <div [bdcWalkTriggerFor]="reportPopup2"
                                    class="relative w-40 h-40 m-2 p-4 shadow rounded-2xl bg-card mobile-tile">
                                    <a class="z-10 absolute inset-0 flex flex-col p-4 cursor-pointer"
                                        (click)="Open_Custom_Report_Dialog()">
                                        <div class="aspect-w-9 aspect-h-6">
                                            <div class="flex items-center justify-center">
                                                <mat-icon class="icon-size-14 text-hint"
                                                    svgIcon="mat_outline:edit_note">
                                                </mat-icon>
                                            </div>
                                        </div>
                                        <div
                                            class="flex flex-col flex-auto justify-center text-center text-sm font-medium">
                                            <div class="truncate" matTooltip="Custom Report">Custom Report
                                            </div>
                                        </div>
                                    </a>
                                </div>
                            </div>
                        </div>
                        <ng-container *ngIf="chosen_Dimension && chosen_Dimension.List_Report.length > 0">
                            <div class="flex flex-col mt-8">
                                <div class="font-medium">Reports</div>
                                <div class="flex flex-wrap -m-2 mt-2">
                                    <ng-container *ngFor="let report of chosen_Dimension.List_Report;">
                                        <a class="flex flex-col w-40 h-40 m-2 p-4 shadow rounded-2xl cursor-pointer bg-card mobile-tile"
                                            [ngClass]="{'chosen-dimension': (chosen_Report && report.REPORT_ID === chosen_Report.REPORT_ID)}"
                                            (click)="Choose_Report(report)">
                                            <div class="aspect-w-9 aspect-h-6">
                                                <div class="flex items-center justify-center">
                                                    <div class="relative">
                                                        <mat-icon class="icon-size-14 text-hint"
                                                            [ngClass]="{'text-primaryColor': (chosen_Report && report.REPORT_ID === chosen_Report.REPORT_ID),
                                                        'text-hint': !(chosen_Report && report.REPORT_ID === chosen_Report.REPORT_ID) }"
                                                            [svgIcon]="'iconsmind:file'"></mat-icon>
                                                        <div
                                                            class="absolute left-0 bottom-0 px-1.5 rounded text-sm font-semibold leading-5 text-white {{Get_File_Color(report.FILE_EXTENSION)}}">
                                                            {{report.FILE_EXTENSION.toUpperCase()}}
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div
                                                class="flex flex-col flex-auto justify-center text-center text-sm font-medium">
                                                <div class="truncate" [matTooltip]="getDisplayName(report.FILE_NAME)">
                                                    {{getDisplayName(report.FILE_NAME)}}</div>
                                            </div>
                                        </a>
                                    </ng-container>
                                </div>
                            </div>
                        </ng-container>
                    </ng-container>
                </div>
            </div>
        </mat-drawer-content>
    </mat-drawer-container>
</div>

<bdc-walk-popup #reportPopup1 name="reportPopup1" [mustCompleted]="{introModal:true}" [showCloseButton]="false"
    [showButton]="true" [buttonText]="'Next'" xPosition="after" [horizontal]="true">
    This is reports module</bdc-walk-popup>
<bdc-walk-popup #reportPopup2 name="reportPopup2" [mustCompleted]="{reportPopup1:true}" [showCloseButton]="false"
    [showButton]="true" [buttonText]="'Next'">
    You can generate your own custom report</bdc-walk-popup>
<bdc-walk-popup #reportPopup3 name="reportPopup3" [mustCompleted]="{reportPopup2:true}" [showCloseButton]="false"
    [showButton]="true">
    You can also download pre-made reports</bdc-walk-popup>