<div class="flex flex-col flex-auto h-full w-full">
    <div class="bg-card pb-4 border-b space-y-2">
        <div class="flex flex-col justify-between px-4 pt-4">
            <div class="flex items-center">
                <div class="flex-auto flex flex-col">
                    <mat-form-field class="flex-auto smartr-mat-emphasized-prefix" subscriptSizing="dynamic">
                        <div class="w-full h-full flex items-center justify-center text-secondary" matPrefix>
                            <mat-icon *ngIf="!isSearching" svgIcon="mat_outline:directions_car"></mat-icon>
                            <mat-progress-spinner *ngIf="isSearching" matSuffix [diameter]="24"
                                [mode]="'indeterminate'">
                            </mat-progress-spinner>
                        </div>
                        <mat-select placeholder="License Plate Category"
                            (selectionChange)="chooseLicensePlateCategory($event)"
                            [value]="oSelected_License_Plate_Category">
                            <mat-option [value]="null">None</mat-option>
                            <mat-option *ngFor="let category of oList_License_Plate_Categories" [value]="category.Name">
                                {{category.Name}}
                            </mat-option>
                        </mat-select>
                    </mat-form-field>
                </div>
            </div>
        </div>
        <div class="flex flex-col justify-between px-4">
            <div class="flex items-center">
                <div class="flex-auto flex flex-col">
                    <mat-form-field class="flex-auto smartr-mat-emphasized-prefix" subscriptSizing="dynamic">
                        <div class="w-full h-full flex items-center justify-center text-secondary" matPrefix>
                            <mat-icon *ngIf="!isSearching" svgIcon="heroicons_outline:hashtag"></mat-icon>
                            <mat-progress-spinner *ngIf="isSearching" matSuffix [diameter]="24"
                                [mode]="'indeterminate'">
                            </mat-progress-spinner>
                        </div>
                        <input matInput type="text" placeholder="License Plate Number"
                            [formControl]="licensePlateNumberSearchInput">
                    </mat-form-field>
                </div>
            </div>
        </div>
    </div>
    <div class="flex flex-auto">
        <div *ngIf="!isNoLicensePlates && dataSource.data.length!=0" class="w-full" style="height: fit-content;">
            <table mat-table matSort matTableResponsive [dataSource]="dataSource" class="border-t w-full">
                <ng-container matColumnDef="License Plate">
                    <th mat-header-cell *matHeaderCellDef class="bg-white w-50"> License Plate </th>
                    <td mat-cell *matCellDef="let element">
                        <div class="border-black border font-bold p-2.5 max-w-36 text-center rounded-md"
                            style="border-left: 15px solid black !important">
                            {{element.PlateNumber}}
                        </div>
                    </td>
                </ng-container>

                <ng-container matColumnDef="Category">
                    <th mat-header-cell *matHeaderCellDef class="bg-white w-50"> Category</th>
                    <td mat-cell *matCellDef="let element"> {{element.Category?element.Category.Name:
                        "N/A"}} </td>
                </ng-container>

                <ng-container matColumnDef="Vehicle Owner">
                    <th mat-header-cell *matHeaderCellDef class="bg-white w-50"> Vehicle Owner</th>
                    <td mat-cell *matCellDef="let element"> {{element.VehicleOwner?element.VehicleOwner:"N/A"}}
                    </td>
                </ng-container>

                <ng-container matColumnDef="Registration Date">
                    <th mat-header-cell *matHeaderCellDef class="bg-white w-50"> Registration Date</th>
                    <td mat-cell *matCellDef="let element">
                        {{element.RegistrationDate?(element.RegistrationDate | date : null :
                        TimezoneService.oCurrent_Timezone_Offset):"N/A"}} </td>
                </ng-container>

                <ng-container matColumnDef="Description">
                    <th mat-header-cell *matHeaderCellDef class="bg-white w-50"> Description </th>
                    <td mat-cell *matCellDef="let element"> {{element.Description?element.Description:"N/A"}}
                    </td>
                </ng-container>

                <tr mat-header-row *matHeaderRowDef="displayedColumns; sticky: true;"></tr>
                <tr mat-row *matRowDef="let row; columns: displayedColumns;">
                </tr>
            </table>
        </div>
        <div *ngIf="isSearching && dataSource.data.length==0" class="loader-container">
            <div class="loader"></div>
        </div>
        <div *ngIf="!isSearching && dataSource.data.length==0"
            class="flex flex-auto items-center justify-center p-6 sm:p-10">
            <div class="mt-2 text-lg md:text-xl font-medium tracking-tight text-center text-secondary">
                No License Plates Were Found</div>
        </div>
    </div>
    <div class="relative flex bg-card px-4">
        <mat-paginator class="w-full" style="justify-content: space-between; z-index: 1;"
            [length]="licensePlateListCount" [pageSize]="pageSize" [pageSizeOptions]="[5, 10, 20, 50, 100]"
            [pageIndex]="pageIndex" [showFirstLastButtons]="true" (page)="setPage($event)" aria-label="Select page">
        </mat-paginator>
    </div>
</div>